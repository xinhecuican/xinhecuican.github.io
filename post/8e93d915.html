<!DOCTYPE html><html lang="zh-Hans" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>js常用对象 | Xinhecuican's Blog</title><meta name="author" content="星河璀璨"><meta name="copyright" content="星河璀璨"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="基本引用类型  Date Date和java的Date类似，里面保存的是从1970年1月1日至今的毫秒数。 创建  Date(date): 创建一个Date对象，包含创建时的时间.date是字符串形式的时间，格式可以参照parse()的格式 Date.now(): 返回当前时间的毫秒数 Date.parse(): 将其他格式的时间字符串转换为该日期的毫秒数,例如let someDate &#x3D; ne">
<meta property="og:type" content="article">
<meta property="og:title" content="js常用对象">
<meta property="og:url" content="https://xinhecuican.github.io/post/8e93d915.html">
<meta property="og:site_name" content="Xinhecuican&#39;s Blog">
<meta property="og:description" content="基本引用类型  Date Date和java的Date类似，里面保存的是从1970年1月1日至今的毫秒数。 创建  Date(date): 创建一个Date对象，包含创建时的时间.date是字符串形式的时间，格式可以参照parse()的格式 Date.now(): 返回当前时间的毫秒数 Date.parse(): 将其他格式的时间字符串转换为该日期的毫秒数,例如let someDate &#x3D; ne">
<meta property="og:locale">
<meta property="og:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg">
<meta property="article:published_time" content="2021-05-30T06:04:00.000Z">
<meta property="article:modified_time" content="2021-07-03T13:32:12.823Z">
<meta property="article:author" content="星河璀璨">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><link rel="shortcut icon" href="/img/favicon.png"><!--link(rel="canonical" href=urlNoIndex())--><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="google-site-verification" content="zmX9zYZL0QVB6fFG_e98QsQogwE11Vdf5hOd4xMbgN4"><meta name="baidu-site-verification" content="EVZv9BO5R3"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-07-03 21:32:12'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    })(window)</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/l-lin/font-awesome-animation/dist/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="/css/background.css"><link rel="stylesheet" href="footer.min.css"><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="Xinhecuican's Blog" type="application/atom+xml">
</head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/null" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">197</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">6</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">28</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Xinhecuican's Blog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">js常用对象</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2021-05-30T06:04:00.000Z" title="Created 2021-05-30 14:04:00">2021-05-30</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2021-07-03T13:32:12.823Z" title="Updated 2021-07-03 21:32:12">2021-07-03</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/js/">js</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word count:</span><span class="word-count">4.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading time:</span><span>17min</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1 id="基本引用类型"><a class="markdownIt-Anchor" href="#基本引用类型"></a> 基本引用类型</h1>
<h2 id="date"><a class="markdownIt-Anchor" href="#date"></a> Date</h2>
<p>Date和java的Date类似，里面保存的是从1970年1月1日至今的毫秒数。</p>
<p><strong>创建</strong></p>
<ul>
<li>Date(date): 创建一个Date对象，包含创建时的时间.date是字符串形式的时间，格式可以参照parse()的格式</li>
<li>Date.now(): 返回当前时间的毫秒数</li>
<li>Date.parse(): 将其他格式的时间字符串转换为该日期的毫秒数,例如<code>let someDate = new Date(Date.parse(&quot;May 23, 2019&quot;));</code>
<ul>
<li>可以使用下列格式</li>
<li>月/日/年： 如&quot;5/23/2019&quot;</li>
<li>月名 日, 年： 如&quot;May 23, 2019&quot;</li>
<li>周几 月名 日 年 时:分:秒:时区，如&quot;Tue May 23 2019 00:00:00 GMT-0700&quot;</li>
<li>YYYY-MM-DDTHH:mm:ss:sssZ,如&quot;2019-05-23T00:00:00</li>
</ul>
</li>
<li>Date.UTC(year, month, day, hour, minute, second):传入年、月(0-11)、日(1-31)、时(0-23)、分、秒并转化为毫秒数，如<code>let y2k = new Date(Date.UTC(2000, 0));</code></li>
</ul>
<p><strong>显示</strong></p>
<ul>
<li>toLocaleSting(): 输出类似于<code>2021/5/30 下午3:51:36</code></li>
<li>toString(): 输出为<code>Sun May 30 2021 15:51:36 GMT+0800 (中国标准时间)</code></li>
<li>toDateString(): 返回周几、月、日、年</li>
<li>toTimeString(): 返回时分秒和时区</li>
<li>toLocaleDateString(): 显示月日年</li>
<li>toLocaleTimeString(): 显示时分秒</li>
<li>toUTCString(): 显示完整的UTC时间</li>
</ul>
<p>还有一些获得单独时间的函数如getYear(),getDate()等可以从函数名得知意思就不再赘述。其中getTime()是获得毫秒的时间</p>
<h2 id="regexp"><a class="markdownIt-Anchor" href="#regexp"></a> RegExp</h2>
<p>RegExp是<a target="_blank" rel="external nofollow noopener noreferrer" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Regular_Expressions">正则表达式</a>，可以通过一些简单的语法创建。如<code>let expression = /pattern/flags</code></p>
<blockquote>
<p>pattern可以设置lastIndex表示下次从该index处开始</p>
</blockquote>
<p>其中pattern是任何正则表达式。每个正则表达式可以带零个或多个标记(flags),用于控制正则表达式的行为，常见的标记有</p>
<ul>
<li>g(global): 全局模式，查找所有匹配字符串，而不是匹配一个就结束.</li>
<li>i(ignoreCase): 不区分大小写</li>
<li>m(multiline): 多行模式，查找到一行文本末尾会继续查找</li>
<li>y(sticky): 粘附模式，表示查找从lastIndex开始的字符串</li>
<li>u(unicode): Unicode模式，启用Unicode匹配</li>
<li>s(dotAll): dotAll模式，匹配任意字符（如<code>\n\r</code>等)</li>
</ul>
<p>可以使用后面的全称来访问是否设置了这些标记</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">console</span><span class="selector-class">.log</span>(<span class="selector-tag">pattern</span><span class="selector-class">.global</span>);</span><br><span class="line"><span class="selector-tag">console</span><span class="selector-class">.log</span>(<span class="selector-tag">pattern</span><span class="selector-class">.source</span>);//表达式的字面字符串</span><br><span class="line"><span class="selector-tag">console</span><span class="selector-class">.log</span>(<span class="selector-tag">pattern</span><span class="selector-class">.flags</span>);所有标记</span><br></pre></td></tr></table></figure>
<p>除了使用字面量，还可以使用构造函数来创建。例如：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> pattern1 = <span class="regexp">/[bc]at/i</span>;</span><br><span class="line"><span class="keyword">let</span> pattern2 = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">&quot;[bc]at&quot;</span>, <span class="string">&quot;i&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">RegExp</span>的模式参数时字符串，有些时候需要二次转义</span><br><span class="line"><span class="keyword">let</span> pattern3 = <span class="regexp">/\[bc\]at/</span></span><br><span class="line"><span class="keyword">let</span> pattern4 = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">&quot;\\[bc\\]at&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br></pre></td></tr></table></figure>
<p><strong>匹配</strong></p>
<p>使用RegExp进行匹配主要是exec(s)方法，方法的参例如：数是待匹配的字符串。如果成功，返回包含第一个匹配的数组，每个字符占一个位置。如果未成功，返回null。返回值虽然是数组，但是额外多加了index和input。index是匹配串中的起始位置，input是待匹配的字符串。</p>
<p>例如：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> text = <span class="string">&#x27;mom and dad and baby&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> pattern = <span class="regexp">/mom( and dad( and baby)?)?/gi</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> matches = pattern.exec(text);</span><br><span class="line"><span class="built_in">console</span>.log(matches[<span class="number">0</span>]);<span class="comment">//mom and data and baby</span></span><br><span class="line"><span class="built_in">console</span>.log(matches[<span class="number">1</span>]);<span class="comment">// and data and baby</span></span><br><span class="line"><span class="built_in">console</span>.log(matches[<span class="number">2</span>]);/ and baby</span><br></pre></td></tr></table></figure>
<p>每个括号表示一个捕获组，也就是第一个会匹配mom and dad and baby,第二个会匹配 and dad and baby.<a target="_blank" rel="external nofollow noopener noreferrer" href="https://zh.javascript.info/regexp-groups#pi-pei-kuo-hao-zhong-de-nei-rong">有关捕获组可看这</a></p>
<p>如果使用了全局标记，那么一次匹配会显示一个匹配的信息，如果没有设置，那么只会返回第一个匹配信息。</p>
<figure class="highlight xquery"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="type">text</span> = <span class="string">&#x27;cat, bat, sat, fat&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> pattern = /.<span class="keyword">at</span>/g;</span><br><span class="line"><span class="keyword">let</span><span class="built_in"> matches</span> = pattern.exec(<span class="type">text</span>);</span><br><span class="line">console.log<span class="built_in">(matches</span>[<span class="number">0</span>]);//cat</span><br><span class="line">matches = pattern.exec(<span class="type">text</span>);</span><br><span class="line">console.log<span class="built_in">(matches</span>[<span class="number">0</span>]);//bat</span><br></pre></td></tr></table></figure>
<p>如果使用了y，那么下次就会从lastIndex开始进行搜索，并且该标记会覆盖全局标记。注意y和g并不相同</p>
<figure class="highlight mel"><table><tr><td class="code"><pre><span class="line">let pattern = /.at/y;</span><br><span class="line">let matches = pattern.<span class="keyword">exec</span>(<span class="keyword">text</span>);</span><br><span class="line">console.<span class="keyword">log</span>(matches[<span class="number">0</span>]);<span class="comment">//cat</span></span><br><span class="line">console.<span class="keyword">log</span>(pattern.lastIndex);<span class="comment">//3</span></span><br><span class="line"></span><br><span class="line">let matches = pattern.<span class="keyword">exec</span>(<span class="keyword">text</span>);</span><br><span class="line">console.<span class="keyword">log</span>(matches[<span class="number">0</span>])<span class="comment">//null</span></span><br><span class="line"><span class="comment">//和上面不同的原因是这里从3开始搜索，而3占据着.的位置，后面两个字符不是at，所以最终出错</span></span><br><span class="line"></span><br><span class="line">pattern.lastIndex = <span class="number">5</span>;</span><br><span class="line">matches = pattern.<span class="keyword">exec</span>(<span class="keyword">text</span>);</span><br><span class="line">console.<span class="keyword">log</span>(matches[<span class="number">0</span>]);<span class="comment">//bat</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>test(),如果有模式匹配则返回true</p>
</blockquote>
<p>此外RegExp本身还有一些属性</p>
<ul>
<li>input: 最后搜索的字符串</li>
<li>lastMatch: 最后匹配的文本</li>
<li>lastParen: 最后匹配的捕获组</li>
<li>leftContext: input字符串中出现在lastMatch前面的文本</li>
<li>rightContext: 出现在后面的文本</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> text = <span class="string">&#x27;this has been a short summer&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> pattern = <span class="regexp">/(.)hort/g</span>;</span><br><span class="line"><span class="keyword">if</span>(pattern.test(text))</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">RegExp</span>.input);<span class="comment">//this has been a shor summer</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">RegExp</span>.leftContext);<span class="comment">//this has been a</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="boolean-number-string"><a class="markdownIt-Anchor" href="#boolean-number-string"></a> Boolean、Number、String</h2>
<p>这些都是原始值包装类型，也就是对原始值的行为进行扩充。每当用到某个原始值的方法和属性时，后台都会创建一个包含原始值的对象。</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">let s1 = <span class="string">&#x27;some text&#x27;</span>;<span class="regexp">//</span>原始值</span><br><span class="line">let s2 = s1.substring(<span class="number">2</span>);<span class="regexp">//</span>创建了一个包装对象并调用substring函数</span><br></pre></td></tr></table></figure>
<p>包装类型的形成大致过程为：</p>
<ol>
<li>发现调用原始值的函数时，创建包装类型</li>
<li>调用实例上的方法</li>
<li>销毁实例</li>
</ol>
<p>这种方式也就意味着我们不能再包装类型上添加方法，因为它使用后会立刻销毁。可以显式的使用Boolean、Number、String创建包装对象，就可以对这些对象进行操作。但是不推荐直接使用包装类型，因为可能会导致一些错误。</p>
<p>构造函数创建的包装类型使用typedef会返回object，因此Object构造方法会根据传入参数不同自动转型。并且如果使用转型函数那么typeof会显示对应类型</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>(<span class="string">&#x27;some text&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(obj <span class="keyword">instanceof</span> <span class="built_in">String</span>);<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> s = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> s);<span class="comment">//object</span></span><br><span class="line"><span class="keyword">let</span> value = <span class="string">&#x27;23&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="built_in">number</span> = <span class="built_in">Number</span>(value);<span class="comment">//转型函数</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">number</span>);<span class="comment">//number</span></span><br></pre></td></tr></table></figure>
<h3 id="number"><a class="markdownIt-Anchor" href="#number"></a> Number</h3>
<ul>
<li>toFixed(precision): 设置保留几位小数。例如 <figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">let</span> num = <span class="number">10</span>;</span><br><span class="line"><span class="attribute">console</span>.log(num.toFixed(<span class="number">2</span>));//<span class="number">10</span>.<span class="number">00</span></span><br></pre></td></tr></table></figure>
</li>
<li>toExponential(precision): 返回科学记数法形式的字符串，也可以设置精度</li>
<li>toPrecision(): 他会根据情况返回结果，可能是固定长度，也可能是科学记数法 <figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> num = <span class="number">99</span>;</span><br><span class="line">console.log(num.<span class="keyword">to</span><span class="constructor">Precision(1)</span>);<span class="comment">//1e+2</span></span><br><span class="line">console.log(num.<span class="keyword">to</span><span class="constructor">Precision(2)</span>);<span class="comment">//99</span></span><br><span class="line">console.log(num.<span class="keyword">to</span><span class="constructor">Precision(3)</span>);<span class="comment">//99.0</span></span><br></pre></td></tr></table></figure>
</li>
<li>isInteger(): 判断一个数值是否是整数，并不是说加了小数点就是整数，例如1.00是整数。他根据小数点之后是否还有位不是0判断是否是整数</li>
</ul>
<h3 id="string"><a class="markdownIt-Anchor" href="#string"></a> String</h3>
<p>js使用了两种unicode编码，都是两个字节表示一个字符。</p>
<p>两个字节最多表示65536中字符。但是为了表示更多字符，有时候会使用前16位中某些为特殊字符，然后后16位和前16位共同表示一个字符，这时使用charAt就会出现问题。</p>
<p>例如：</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> message = <span class="module-access"><span class="module"><span class="identifier">String</span>.</span></span>from<span class="constructor">CodePoint(97, 98, 128522, 100, 101)</span>;<span class="comment">//将数字转换成unicode字符,分别是a, b, 笑脸, d, e</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//128522的十六进制是0x1f60a</span></span><br><span class="line"></span><br><span class="line">console.log(message.length);<span class="comment">//6(实际上显示时只有五个字符</span></span><br><span class="line">console.log(message.<span class="built_in">char</span><span class="constructor">At(1)</span>);<span class="comment">//b</span></span><br><span class="line">console.log(message.<span class="built_in">char</span><span class="constructor">At(2)</span>);<span class="comment">//&lt;?&gt;</span></span><br><span class="line">console.log(message.<span class="built_in">char</span><span class="constructor">At(3)</span>);<span class="comment">//&lt;?&gt;</span></span><br><span class="line">console.log(message.<span class="built_in">char</span><span class="constructor">At(4)</span>);<span class="comment">//d</span></span><br><span class="line"></span><br><span class="line">console.log(message.<span class="built_in">char</span><span class="constructor">CodeAt(1)</span>);<span class="comment">//98,b的序号</span></span><br><span class="line">console.log(message.<span class="built_in">char</span><span class="constructor">CodeAt(2)</span>);<span class="comment">//55357</span></span><br></pre></td></tr></table></figure>
<ul>
<li>length</li>
<li>charAt(index): 返回下标处的字符</li>
<li>charCodeAt(index): 返回下标处的字符对应数值，例如0是48。但是它不会考虑扩展字符</li>
<li>codePointAt(index): 返回下表处的字符对应数值，考虑了扩展字符</li>
<li>fromCharCode(…): 根据字符对应数值返回字符串，如<code>String.fromChatCode(48, 49)//01</code></li>
<li>fromCodePoint(…): …</li>
<li>normalize(): 某些字符可以有多种编码方式，normalize()统一这些编码，共有NFD、NFC、NFKD、NFKC四种规范形式 <figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">console.log(<span class="module-access"><span class="module"><span class="identifier">String</span>.</span></span>from<span class="constructor">CharCode(0x00c5)</span>);<span class="comment">//大写拉丁字母</span></span><br><span class="line">console.log(<span class="module-access"><span class="module"><span class="identifier">String</span>.</span></span>from<span class="constructor">CharCode(0x212B)</span>);<span class="comment">//长度单位埃</span></span><br><span class="line">console.log(<span class="module-access"><span class="module"><span class="identifier">String</span>.</span></span>from<span class="constructor">CharCode(0x0041, 0x030a)</span>);<span class="comment">//大写拉丁字母上面加个圆圈</span></span><br><span class="line">这三个虽然编码不相同，但是实际上最后返回的是同一个东西，而使用==是比较不出的，这时我们就需要normalize<span class="literal">()</span>规范编码</span><br><span class="line"><span class="keyword">let</span> a1 = <span class="module-access"><span class="module"><span class="identifier">String</span>.</span></span>from<span class="constructor">CharCode(0x00c5)</span>);</span><br><span class="line"><span class="keyword">let</span> a2 = <span class="module-access"><span class="module"><span class="identifier">String</span>.</span></span>from<span class="constructor">CharCode(0x212b)</span>);</span><br><span class="line"></span><br><span class="line">console.log(a1<span class="operator"> == </span>a2);<span class="comment">//false</span></span><br><span class="line">console.log(a1.normalize(&#x27;NFD&#x27;)<span class="operator"> == </span>a2.normalize(&#x27;NFD&#x27;));<span class="comment">//true</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>下面是字符串操作方法</p>
<ul>
<li>concat(): 将若干个字符串拼接到当前字符串后面，concat()可以接受任意数量的字符串，例如 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="string">&#x27;hello &#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> result = s.concat(<span class="string">&#x27;world&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(result);<span class="comment">//hello world</span></span><br></pre></td></tr></table></figure>
</li>
<li>slice,substring, substr: 三个都是获得子字符串，第一个参数都是子字符串开始位置，前两个的第二个参数是结尾位置，而substr第二个参数是抽取字符数量。</li>
<li>indexOf(),lastIndexOf(): 查找子字符串在字符串中的位置，不同的是indexOf从开始查找，而lastIndexOf从结尾开始查找。第一个参数是要查找的字符串，第二个参数时起始位置</li>
<li>startsWith、endsWith/includes: 检查一个字符串是否包含另一个字符串，startsWith是从第一个字符开始匹配(检查是否是以这个字符串开头)，endsWith是从string.length-substring.length开始匹配。而includes检索整个字符串 <figure class="highlight mel"><table><tr><td class="code"><pre><span class="line">let message = <span class="string">&#x27;foobarbaz&#x27;</span>;</span><br><span class="line">console.<span class="keyword">log</span>(message.<span class="keyword">startsWith</span>(<span class="string">&#x27;foo&#x27;</span>));<span class="comment">//true</span></span><br><span class="line">console.<span class="keyword">log</span>(message.<span class="keyword">startsWith</span>(<span class="string">&#x27;bar&#x27;</span>));<span class="comment">//false,不是以bar开头</span></span><br><span class="line"></span><br><span class="line">console.<span class="keyword">log</span>(message.<span class="keyword">endsWith</span>(<span class="string">&#x27;baz&#x27;</span>));<span class="comment">//true</span></span><br><span class="line">console.<span class="keyword">log</span>(message.includes(<span class="string">&#x27;baz&#x27;</span>));/true</span><br></pre></td></tr></table></figure>
</li>
<li>trim(): 删除两边所有的空格</li>
<li>repeat(times): 把原字符串复制times次</li>
<li>padStart()、padEnd(): 复制字符串，如果小于指定长度则会填充字符。第一个参数时长度，第二个参数时填充字符</li>
<li>toLowerCase(),  toUpperCase()</li>
</ul>
<p>下面是匹配（正则表达式）：</p>
<ul>
<li>
<p>match(regexp): 作用和RegExp中的exec类似，只是这里的参数变成了模式串，并且这里全局模式直接返回一个数组</p>
</li>
<li>
<p>search(regexp): 返回第一个匹配</p>
</li>
<li>
<p>replace(regexp, replace_str): 如果第一个参数是一个字符串，那么只会替换第一个匹配到的，如果想要匹配所有，必须使用正则表达式并且加上g。<br>
其中replace_str有几种特殊的符号可以使用</p>
<table>
<thead>
<tr>
<th>字符</th>
<th>替换文本</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$$</code></td>
<td><code>$</code></td>
</tr>
<tr>
<td><code>$'</code></td>
<td>替换匹配子字符串之前的字符串</td>
</tr>
<tr>
<td>$`</td>
<td>匹配子字符串之后的字符串</td>
</tr>
<tr>
<td><code>$n</code></td>
<td>匹配第n个捕获组，关于捕获组可以看前面.范围是0-9</td>
</tr>
<tr>
<td><code>$nn</code></td>
<td>匹配第nn个捕获组，如01-99</td>
</tr>
</tbody>
</table>
<p>例如：</p>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> text = <span class="string">&#x27;cat, bat, sat, fat&#x27;</span>;</span><br><span class="line">result = text.replace(<span class="regexp">/(.at)/g</span>, <span class="string">&#x27;word ($1)&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(result); <span class="comment">//word (cat), word (bat), word (sat), word (fat)</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>字符串有迭代器，可以使用for-of访问每个字符，例如：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> message = <span class="string">&#x27;abc&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> stringIterator = message[<span class="built_in">Symbol</span>.iterator]();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(stringIterator.next());<span class="comment">//[value: &#x27;a&#x27;, done: false]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">const</span> c <span class="keyword">of</span> <span class="string">&#x27;abcde&#x27;</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(c);</span><br><span class="line">&#125;</span><br><span class="line">并且我们还可以使用解构操作符把字符串变成数组</span><br><span class="line"><span class="keyword">let</span> message = <span class="string">&#x27;abcde&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log([...message]);<span class="comment">//[&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;, &#x27;e&#x27;];</span></span><br></pre></td></tr></table></figure>
<h2 id="global"><a class="markdownIt-Anchor" href="#global"></a> Global</h2>
<p>内置对象就是在程序执行前就开始执行的对象，和宿主环境无关，例如Object、Array和String都是内置对象。</p>
<p>window对象已经实现了Global对象的代理，它有Global的一系列方法。</p>
<p>方法：</p>
<ul>
<li>encodeURI(),encodeURIComponent(): 用于编码URI来传给浏览器。他会对某些不能出现在URI中的字符进行处理，如空格.其中encodeURIComponent()会对冒号、斜杠、问号等字符也进行编码 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> uri = <span class="string">&#x27;http://www.wrox.com/illegal value.js&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">encodeURI</span>(uri));</span><br><span class="line"><span class="comment">//http://www.wrox.com/illegal%20value.js&#x27;,把空格变成%20</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">encodeURIComponent</span>(uri));</span><br><span class="line"><span class="comment">//http%3a%2f%2fwww.wrox.com%2fillegal%20value.js&#x27;;</span></span><br></pre></td></tr></table></figure>
</li>
<li>eval(): 调用eval时，字符串会被解析为语句并执行，例如<code>eval(&quot;console.log('hi')&quot;);//hi</code></li>
</ul>
<h2 id="math"><a class="markdownIt-Anchor" href="#math"></a> Math</h2>
<p>math提供了许多数学计算的方法。并且math上提供的计算比普通计算要快很多，因为它的实现更加高效。</p>
<p><strong>math属性</strong></p>
<p>math中的属性包含了一些特殊值</p>
<ul>
<li>E: 2.71828</li>
<li>LN10: 以10为底的自然对数</li>
<li>LN2: 以2为底的自然对数</li>
<li>LOG2E: 以2为底e的对数</li>
<li>LOG10E: 以10为底e的对数</li>
<li>PI</li>
<li>SQRT1_2: 1/2的平方根</li>
<li>SQRT2： 2的平方根</li>
</ul>
<p>方法：</p>
<ul>
<li>min(), max()</li>
<li>ceil(): 向上舍入</li>
<li>floor(): 向下舍入</li>
<li>round(): 四舍五入</li>
<li>fround(): 返回浮点数表示</li>
<li>random(): 返回0-1的随机数，其中包含0但不包含1</li>
<li>等等</li>
</ul>
<h1 id="集合引用类型"><a class="markdownIt-Anchor" href="#集合引用类型"></a> 集合引用类型</h1>
<h2 id="array"><a class="markdownIt-Anchor" href="#array"></a> Array</h2>
<p>创建数组</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> colors = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line"><span class="keyword">let</span> colors = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">3</span>);<span class="comment">//创建长度为3的数组</span></span><br><span class="line"><span class="keyword">let</span> names = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="string">&quot;Greg&quot;</span>);<span class="comment">//只包含一个元素的数组</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> colors = [<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>, <span class="string">&#x27;green&#x27;</span>]<span class="comment">//使用数组字面量创建数组</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> colors = [,,,,,];<span class="comment">//创建包含5个元素的数组</span></span><br></pre></td></tr></table></figure>
<ul>
<li>from(data, func, this): 从data转换为数组，data可以是集合，map等。func是进行的一些操作。this是func中的this值，但是func不能是箭头函数</li>
<li>of(): 将一组参数转换成数组</li>
</ul>
<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">const</span> a<span class="number">1</span> =<span class="meta"> [1, 2, 3, 4]</span></span><br><span class="line"><span class="attribute">const</span> a<span class="number">2</span> = Array.from(a<span class="number">1</span>, x=&gt;x**<span class="number">2</span>)</span><br><span class="line"><span class="attribute">const</span> a<span class="number">3</span> = Array.from(a<span class="number">1</span>, function(x) &#123;return x**this.exponent&#125;, &#123;exponent: <span class="number">2</span>&#125;);</span><br><span class="line"></span><br><span class="line"><span class="attribute">Array</span>.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br></pre></td></tr></table></figure>
<p><strong>索引</strong></p>
<p>数组索引和c++最大的不同是它可以动态变化，例如</p>
<figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> colors = [<span class="symbol">&#x27;red</span>&#x27;, <span class="symbol">&#x27;blue</span>&#x27;, green&#x27;];</span><br><span class="line">colors[<span class="number">3</span>] = <span class="symbol">&#x27;yellow</span>&#x27;;<span class="comment">//添加一个元素</span></span><br></pre></td></tr></table></figure>
<p>Array中有一个属性length代表了数组的长度,这个值是可以进行设置的，从而改变数组长度(如果缩减长度会导致原有内容消失)</p>
<figure class="highlight rsl"><table><tr><td class="code"><pre><span class="line">let colors = [<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>, <span class="string">&#x27;green&#x27;</span>]</span><br><span class="line">colors[<span class="number">99</span>] = <span class="string">&#x27;black&#x27;</span>;</span><br><span class="line">console.<span class="built_in">log</span>(colors.<span class="built_in">length</span>)<span class="comment">//100</span></span><br><span class="line">colors.<span class="built_in">length</span> = <span class="number">2</span></span><br><span class="line">console.<span class="built_in">log</span>(colors[<span class="number">2</span>])<span class="comment">//undefined</span></span><br><span class="line">colors.<span class="built_in">length</span> = <span class="number">3</span></span><br><span class="line">console.<span class="built_in">log</span>(colors[<span class="number">2</span>])<span class="comment">//undefined，缩减后数据被删除了</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//可以很方便的添加数据</span></span><br><span class="line">colors[<span class="built_in">length</span>] = <span class="string">&#x27;yellow&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p><strong>方法</strong></p>
<ul>
<li>keys(),values(), entries(): keys是索引的迭代器，values是值的迭代器，entries()是键值对的迭代器，例如 <figure class="highlight sas"><table><tr><td class="code"><pre><span class="line">const <span class="meta">key</span> = <span class="meta">Array</span>.<span class="meta">from</span>(a.keys())</span><br><span class="line">console<span class="meta">.log(</span><span class="meta">key</span>)//0, 1, 2, 3</span><br><span class="line">const value = <span class="meta">Array</span>.<span class="meta">from</span>(a.values())</span><br><span class="line">console<span class="meta">.log(</span>value)//<span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;bar&#x27;</span>, <span class="string">&#x27;baz&#x27;</span>, <span class="string">&#x27;qux&#x27;</span></span><br><span class="line">const entries = <span class="meta">Array</span>.<span class="meta">from</span>(a.entries())</span><br><span class="line">console<span class="meta">.log(</span>entires)//[0, <span class="string">&#x27;foo&#x27;</span>], [1, <span class="string">&#x27;bar&#x27;</span>], [2, <span class="string">&#x27;baz&#x27;</span>], [3, <span class="string">&#x27;qux&#x27;</span>]</span><br><span class="line"></span><br><span class="line">for(const [idx, element] of a.entires())</span><br><span class="line">&#123;</span><br><span class="line">    console<span class="meta">.log(</span>idx);</span><br><span class="line">    console<span class="meta">.log(</span>element);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>fill(sum, begin, end): 从begin到end填充sum</li>
<li>copyWithin(index, begin, end): 复制数组begin到end的内容并且插入到以index开始的位置中</li>
<li>toString(): 每个值都会调用toString()方法</li>
<li>push(): 拖入任意数量的值并且放入末尾</li>
<li>pop(): 删除最后一项</li>
<li>shift(): 取得第一项</li>
<li>unshift()： 从第一个位置插入</li>
<li>sort(func): 排序，可以按照指定的func进行排序</li>
<li>reverse(): 反向排序</li>
<li>concat(): 拼接</li>
<li>indexOf(), includes(), lastIndexOf(): 搜索某一个元素在数组中的位置，indexOf(), includes()从前往后搜索，lastIndexOf()从后往前.indexOf()和lastIndexOf()没有搜索到返回-1.includes()没有搜索到返回false。他们进行比较时使用====，也就是两项必须严格相等</li>
<li>every(func): 对每一项都运行函数，如果全部返回为真，则结果为真</li>
<li>filter(func): 运行函数为true的项会组成数组返回</li>
<li>foreach(func): 对每一项都运行函数</li>
<li>map(func): 对每一项都运行函数，返回由函数结果构成的数组</li>
<li>some(func): 只要有一项返回为true结果就为true <figure class="highlight nim"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> number = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>]</span><br><span class="line"><span class="keyword">let</span> <span class="literal">result</span> = number.every((item, index, <span class="built_in">array</span>)=&gt;item &gt; <span class="number">2</span>);//<span class="literal">false</span></span><br><span class="line"><span class="keyword">let</span> mapres = number.map((item, index, <span class="built_in">array</span>)=&gt;item * <span class="number">2</span>);</span><br><span class="line">number.forEach((item, index, <span class="built_in">array</span>)=&gt;<span class="meta">&#123;...&#125;</span>);</span><br></pre></td></tr></table></figure>
</li>
<li>reduce(func): 对数组中数据进行归约 <figure class="highlight maxima"><table><tr><td class="code"><pre><span class="line"><span class="built_in">let</span> <span class="built_in">values</span> = [<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>]</span><br><span class="line"><span class="built_in">let</span> <span class="built_in">sum</span> = <span class="built_in">values</span>.reduce((prev, cur, index, <span class="built_in">array</span>)=&gt; prev + cur);//<span class="number">30</span></span><br><span class="line"></span><br><span class="line">第一次执行时prev=<span class="number">1</span>,cur=<span class="number">4</span>,第二次执行prev=<span class="number">5</span>(前面的归约结果), cur=<span class="number">9</span>（第三项</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="map"><a class="markdownIt-Anchor" href="#map"></a> Map</h2>
<p>创建：</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> m = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"><span class="keyword">const</span> m1 = <span class="keyword">new</span> <span class="built_in">Map</span>([</span><br><span class="line">    [<span class="string">&#x27;key1&#x27;</span>, <span class="string">&#x27;val1&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;key2&#x27;</span>, <span class="string">&#x27;val2&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;key3&#x27;</span>, <span class="string">&#x27;val3&#x27;</span>]</span><br><span class="line">]);</span><br></pre></td></tr></table></figure>
<p>map和object类型都可以插入键值对，但是他们还是有很大区别的。Object类型的键只能是数值，字符串或符号，而map可以是任意类型。其次map内部是有序的（插入顺序），而Object是无序的。我们可以使用entries()获得一个个按照插入顺序排列的(key, value)形式的数组</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(let pair of m.entries())</span><br><span class="line">&#123;</span><br><span class="line">    alert(pair);</span><br><span class="line">&#125;</span><br><span class="line"><span class="regexp">//</span>[key1, val1]</span><br><span class="line"><span class="regexp">//</span>[key2, val2]</span><br><span class="line"><span class="regexp">//</span>[key3, val3]</span><br></pre></td></tr></table></figure>
<p>函数：</p>
<ul>
<li>set(): 添加键值对</li>
<li>get()/has(): 输入键，查询值</li>
<li>delete()/clear(): 删除 <figure class="highlight arduino"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> m = <span class="keyword">new</span> Map();</span><br><span class="line">m.<span class="built_in">get</span>(<span class="string">&quot;firstName&quot;</span>);</span><br><span class="line">m.<span class="built_in">set</span>(<span class="string">&quot;firstName&quot;</span>, <span class="string">&quot;Matt&quot;</span>);</span><br><span class="line"></span><br><span class="line">m.has(<span class="string">&quot;firstName&quot;</span>);<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line">m.<span class="keyword">delete</span>(<span class="string">&quot;firstName&quot;</span>);</span><br></pre></td></tr></table></figure>
</li>
<li>keys()/values(): 返回key或value的迭代器</li>
</ul>
<p>键和值在迭代器遍历时是可以修改的，但是在Map内部不会修改。当然，这种修改不会影响使用这个键访问值</p>
<figure class="highlight processing"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> m = <span class="keyword">new</span> Map([[<span class="string">&quot;key1&quot;</span>, <span class="string">&quot;val1&quot;</span>]]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(le tkey of m.keys())</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">key</span> = <span class="string">&quot;newKey&quot;</span>;</span><br><span class="line">    alert(m.<span class="built_in">get</span>(<span class="string">&quot;key1&quot;</span>)<span class="comment">//val1,说明在map内没有被修改</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> keyObj = &#123;id: <span class="number">1</span>&#125;;</span><br><span class="line"><span class="keyword">const</span> m1 = <span class="keyword">new</span> Map([[keyObj, <span class="string">&quot;val1&quot;</span>]]);</span><br><span class="line"><span class="keyword">for</span>(let <span class="built_in">key</span> of m.keys())</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">key</span>.id = <span class="string">&quot;newKey&quot;</span>;</span><br><span class="line">    alert(m.<span class="built_in">get</span>(<span class="built_in">key</span>);<span class="comment">//val1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>WeakMap</strong></p>
<p>弱映射表示映射的键是弱的，一旦键的引用被清除，这个键值对就会被清除。</p>
<p>他和普通的Map不同在于普通的map的键是在对象中独立存在的，除非调用delete否则不会被清除，而WeakMap中键直接引用外部变量，外部变量被清除这个键值对也就被清除。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> w = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> container = &#123; <span class="attr">key</span>: &#123;&#125;&#125;;</span><br><span class="line"></span><br><span class="line">w.set(container.key, <span class="string">&#x27;val&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">remove_reference</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    container.key = <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>由于container对象保有对key的引用，所以这个键值对暂时不会被清除，一旦调用remove_reference清除了外部引用之后，这个键值对将自动清除。</p>
<p>因为引用被删除就会自动回收，所以它可以很方便的给某些数据添加额外属性，省的每次都要delete</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> w = <span class="keyword">new</span> WeakMap();</span><br><span class="line"><span class="keyword">const</span> loginButton = <span class="built_in">document</span>.<span class="built_in">querySelector</span>(<span class="string">&#x27;#login&#x27;</span>);</span><br><span class="line">w.<span class="keyword">set</span>(loginButton, &#123;disabled: <span class="keyword">true</span>&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="set"><a class="markdownIt-Anchor" href="#set"></a> set</h2>
<p>set的基本函数和map类似，并且它的插入也是按序的。但是js里面的set和其他的set不同。它并没有提供集合操作方法，需要我们自己实现。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">static</span> union(a, ...bSets)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">const</span> unionSet = <span class="keyword">new</span> My_set(a);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">const</span> b <span class="keyword">of</span> bSets)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">const</span> bValue <span class="keyword">of</span> b)</span><br><span class="line">        &#123;</span><br><span class="line">            unionSet.add(bValue);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> unionSet;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> intersect(a, ...bSets)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">const</span> interset = <span class="keyword">new</span> My_set(a);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">const</span> aValue <span class="keyword">of</span> interSet)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">const</span> b <span class="keyword">of</span> bSets)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(!b.has(aValue)</span><br><span class="line">            &#123;</span><br><span class="line">                interset.delete(aValue);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>此外，他也有WeakSet，效果和WeakMap相同</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined" rel="external nofollow noopener noreferrer" target="_blank">星河璀璨</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://xinhecuican.github.io/post/8e93d915.html">https://xinhecuican.github.io/post/8e93d915.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="external nofollow noopener noreferrer" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/post/42e73f05.html"><img class="prev-cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">关联规则</div></div></a></div><div class="next-post pull-right"><a href="/post/cc8f0814.html"><img class="next-cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">贝叶斯方法</div></div></a></div></nav><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.</span> <span class="toc-text"> 基本引用类型</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#date"><span class="toc-number">1.1.</span> <span class="toc-text"> Date</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#regexp"><span class="toc-number">1.2.</span> <span class="toc-text"> RegExp</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#boolean-number-string"><span class="toc-number">1.3.</span> <span class="toc-text"> Boolean、Number、String</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#number"><span class="toc-number">1.3.1.</span> <span class="toc-text"> Number</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#string"><span class="toc-number">1.3.2.</span> <span class="toc-text"> String</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#global"><span class="toc-number">1.4.</span> <span class="toc-text"> Global</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#math"><span class="toc-number">1.5.</span> <span class="toc-text"> Math</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%9B%86%E5%90%88%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.</span> <span class="toc-text"> 集合引用类型</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#array"><span class="toc-number">2.1.</span> <span class="toc-text"> Array</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#map"><span class="toc-number">2.2.</span> <span class="toc-text"> Map</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#set"><span class="toc-number">2.3.</span> <span class="toc-text"> set</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2021 By 星河璀璨</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="external nofollow noopener noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="Increase font size"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="Decrease font size"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="Toggle Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="rightside.chat_btn"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">Local search</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"></div></div></div><hr><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    let initData = {
      el: '#vcomment',
      appId: 'UJ3adzdUjnlMT2KmVU6dfoyO-MdYXbMMI',
      appKey: 'SGFIXvul1h4NATEJbvSGuU0i',
      placeholder: '邮箱和网址都可以不用填哟',
      avatar: 'monsterid',
      meta: 'nick,mail,link'.split(','),
      pageSize: '10',
      lang: 'zh-CN',
      recordIP: false,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: true,
      path: window.location.pathname,
      master: '1ee9943f931df37af9dc1c57f5859da4',
    }

    if (true) { 
      initData.requiredFields= ('nick'.split(','))
    }
    
    if (false) {
      const otherData = false
      initData = Object.assign({}, initData, otherData)
    }
    
    const valine = new Valine(initData)
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/gh/HCLonely/Valine@latest/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.querySelector('#vcomment'),loadValine)
  else setTimeout(() => loadValine(), 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script src="/js/mychange.js"></script><script defer src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/hexo-theme-volantis@latest/source/js/issues.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>